"use strict";(self.webpackChunkberry_material_react_free=self.webpackChunkberry_material_react_free||[]).push([[409],{92409:function(e,o,t){t.r(o),t.d(o,{default:function(){return k}});var n=t(13967),l=t(697),i=t(48550),s=t(20890),r=t(94294),d=t(23786),a=t(11087),u=t(50533),c=t(23197),h=(t(24904),t(80184));var x=()=>(0,h.jsx)(u.Z,{disableRipple:!0,component:a.rU,to:c.Z.defaultPath,children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(s.Z,{variant:"h2",component:"h3",sx:{pl:2,fontWeight:"500",font:"Lalezar",fontStyle:"normal",color:"#FFFFFF",fontSize:"35px",fontFamily:"Livvic-Bold"},children:"Grwth.x"})})}),p=t(23957),v=t(36314),m=t(67026),f=t(72791),g=t(57689),y=t(53585),j=t(74673),Z=t(35669),F=t(53329),b=t(3746),C=t(24137),w=t(87472);var k=e=>{var o,t,u,c,k,I;let{data:S,userId:M,roomId:_,postMessage:R}=e;const[L,B,T]=(0,j.Z)(),E=(0,n.Z)(),[P]=(0,a.lr)(),[z,A]=(0,f.useState)(P.get("code")),N=(0,g.s0)(),[D,G]=(0,f.useState)([]),[U,W]=(0,f.useState)({}),[J,q]=(0,f.useState)(!1),{data:H}=(0,Z.gw)(),[K,O]=(0,Z.Aj)(),[Q,V]=(0,Z.hd)(),[X]=(0,Z._y)(),[Y,$]=(0,f.useState)(!1),[ee,oe]=(0,f.useState)("");(0,f.useEffect)((()=>{oe(S.title)}),[null===S||void 0===S?void 0:S.title]),(0,f.useEffect)((async()=>{setTimeout((()=>{!async function(){G(L[y.Jv])}()}),1e3)}),[L]);const[te,ne]=(0,f.useState)(null),[le,ie]=(0,f.useState)(),[se,re]=(0,f.useState)(),[de,ae]=(0,f.useState)(),[ue,ce]=(0,f.useState)(""),[he,xe]=(0,f.useState)(!1),pe=(0,f.useMemo)((()=>(e=>{if(e){var o;const n=null===e||void 0===e||null===(o=e.students)||void 0===o?void 0:o.filter((e=>e.userId===M));var t;return n?(ce(null===(t=n[0])||void 0===t?void 0:t.mark),n[0]):{}}return{}})(S)),[S]),ve=(0,f.useMemo)((()=>(e=>{if(e){var o;const t=null===e||void 0===e||null===(o=e.students)||void 0===o?void 0:o.filter((e=>"Teacher"===e.role));return t?t[0]:{}}return{}})(S)),[S]),[me,fe]=(0,Z.bN)(),ge=(e,o,t,n)=>{e.stopPropagation(),me({studentId:o,roomId:t,mark:e.target.value}),ce(e.target.value)},ye=e=>{R(e);const o={roomId:_,userId:M};e===y.TA?setTimeout((()=>N("/preview",{state:o})),6e3):e===y.en&&setTimeout((()=>N("/play",{state:o})),6e3)};return window.addEventListener("message",(function(e){"loadedroom"===(null===e||void 0===e?void 0:e.data)&&xe(!0)})),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(l.Z,{sx:{width:"100%",height:"68px",display:"flex",justifyContent:"space-between",backgroundColor:"#7983FF",alignItems:"center",textAlign:"center",[E.breakpoints.down("md")]:{width:"auto"}},children:[(0,h.jsx)(w.Z,{open:J,handleClose:()=>q(!1),roomId:(null===S||void 0===S||null===(o=S.rooms)||void 0===o?void 0:o.length)>0&&(null===S||void 0===S||null===(t=S.rooms[0])||void 0===t?void 0:t._id),senderId:1===(null===H||void 0===H?void 0:H.type)?null===ve||void 0===ve?void 0:ve._id:pe._id}),(0,h.jsx)(l.Z,{component:"span",children:(0,h.jsx)(x,{})}),(0,h.jsxs)(l.Z,{sx:{display:"flex",alignItems:"end"},children:[(0,h.jsx)(l.Z,{sx:{background:"#5243B0",borderRadius:"10px"},children:Y?(0,h.jsx)(i.Z,{sx:{color:"#FFFFFF",fontSize:"28px",fontFamily:"Livvic-SemiBold"},type:"text",value:ee,onChange:e=>oe(e.target.value)}):(0,h.jsx)(s.Z,{sx:{color:"#FFFFFF",fontSize:"28px",fontFamily:"Livvic-SemiBold",margin:"2.5px 10px"},onClick:()=>{$(!0)},children:ee})}),Y&&(0,h.jsx)(r.Z,{variant:"contained",onClick:()=>{Q({roomId:_,userId:M,title:ee}),$(!1)},sx:{margin:"auto 20px",color:"white",backgroundColor:"#7983FF",borderRadius:"10px"},children:"Save"}),(0,h.jsxs)(p.Z,{open:Boolean(le),anchorEl:le,onClose:()=>ie(null),sx:{p:0,mt:1.5,ml:.75,"& .MuiMenuItem-root":{typography:"body2",borderRadius:.75}},children:[(0,h.jsx)(d.Z,{sx:{m:1},children:"Assignment Info"}),(0,h.jsx)(d.Z,{onClick:()=>{q(!0),ie(null)},sx:{m:1},children:"Comments"}),1===(null===H||void 0===H?void 0:H.type)&&(0,h.jsx)(d.Z,{onClick:e=>{ie(null),ae(e.currentTarget)},sx:{m:1},children:"Grade/Marks"})]}),(null===S||void 0===S||null===(u=S.groups)||void 0===u?void 0:u.length)>0?("Submitted"===(null===S||void 0===S||null===(c=S.groups[0])||void 0===c?void 0:c.status)||"Done late"===(null===S||void 0===S||null===(k=S.groups[0])||void 0===k?void 0:k.status))&&(0,h.jsx)(p.Z,{anchorReference:"anchorPosition",anchorPosition:{top:55,left:700},open:Boolean(de),anchorEl:de,onClose:()=>ae(null),sx:{p:0,mt:1.5,ml:.75,"& .MuiMenuItem-root":{typography:"body2",borderRadius:.75}},children:(0,h.jsx)(d.Z,{sx:{m:1,display:"flex",justifyContent:"space-between"},children:(0,h.jsx)(i.Z,{label:null===S||void 0===S?void 0:S.grade,type:"text",InputLabelProps:{shrink:!0},value:ue,onChange:e=>ge(e,null===S||void 0===S?void 0:S.groups[0]._id,null===S||void 0===S?void 0:S.rooms[0]._id,null===pe||void 0===pe||pe.groupName)})})}):("Submitted"===(null===pe||void 0===pe?void 0:pe.status)||"Done late"===(null===pe||void 0===pe?void 0:pe.status))&&(0,h.jsx)(p.Z,{anchorReference:"anchorPosition",anchorPosition:{top:55,left:700},open:Boolean(de),anchorEl:de,onClose:()=>ae(null),sx:{p:0,mt:1.5,ml:.75,"& .MuiMenuItem-root":{typography:"body2",borderRadius:.75}},children:(0,h.jsx)(d.Z,{sx:{m:1,display:"flex",justifyContent:"space-between"},children:(0,h.jsx)(i.Z,{label:null===S||void 0===S?void 0:S.grade,type:"text",InputLabelProps:{shrink:!0},value:ue,onChange:e=>ge(e,pe._id,null===S||void 0===S?void 0:S.rooms[0]._id,null===pe||void 0===pe||pe.groupName)})})})]}),(0,h.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-evenly",pr:4,justifyContent:"center",alignItems:"center",gap:"20px"},children:[(0,h.jsxs)(l.Z,{sx:{mr:6,display:"flex",alignItems:"end"},children:[(0,h.jsx)(s.Z,{variant:"h6",component:"h6",sx:{pl:2,fontWeight:"500",font:"Lalezar",fontStyle:"normal",color:"#FFFFFF",fontSize:"15px",fontFamily:"Livvic",cursor:"pointer"},children:(null===pe||void 0===pe?void 0:pe.nameZh)||L[y.Ms]}),(0,h.jsx)(p.Z,{open:Boolean(se),anchorEl:se,onClose:()=>re(null),sx:{p:0,mt:1.5,ml:.75,"& .MuiMenuItem-root":{typography:"body2",borderRadius:.75}},children:null===S||void 0===S||null===(I=S.students)||void 0===I?void 0:I.map((e=>{if("Student"===e.role)return(0,h.jsxs)(d.Z,{sx:{m:1,display:"flex",justifyContent:"space-between"},children:[(0,h.jsx)(s.Z,{children:e.nameZh}),(0,h.jsx)(s.Z,{children:e.mark?e.mark:e.status})]})}))})]}),he&&(0,h.jsx)(l.Z,{onClick:()=>R(y.CF),children:(0,h.jsx)(F.Z,{sx:{color:"#ffffff",width:"35px",height:"35px"}})}),he&&(0,h.jsx)(l.Z,{onClick:()=>ye(y.TA),children:(0,h.jsx)(b.Z,{sx:{color:"#ffffff",width:"35px",height:"35px"}})}),he&&(0,h.jsx)(l.Z,{onClick:()=>ye(y.en),children:(0,h.jsx)(C.Z,{sx:{color:"#ffffff",width:"35px",height:"35px"}})}),(0,h.jsx)(v.Z,{direction:"row",spacing:2,children:(0,h.jsx)("img",{src:L[y.N5]||m,alt:"UserIcon",width:32,height:32,style:{borderRadius:"50%"},onClick:e=>{ne(e.currentTarget)}})}),(0,h.jsx)(p.Z,{open:Boolean(te),anchorEl:te,onClose:()=>{ne(null)},sx:{p:0,mt:1.5,ml:.75,"& .MuiMenuItem-root":{typography:"body2",borderRadius:.75}},children:(0,h.jsx)(d.Z,{onClick:async()=>{let e="";e="https://uatgrwth.app360.cn/grwth-as/logout?redirect=https://grwthx.grwth.hk",X({}),B(),setTimeout((()=>window.location.href=e),1e3)},sx:{m:1},children:"Logout"})})]})]})})}}}]);
//# sourceMappingURL=409.f5186141.chunk.js.map